<div class="min-h-screen bg-white dark:bg-(--color-dark-theme) py-12 md:py-20 px-4">
  <div class="mx-auto max-w-6xl">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-start mb-4">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800 dark:text-white">
          {{ 'blog.title' | translate }}
        </h1>
      </div>
      <p class="text-gray-600 dark:text-gray-400 text-lg">
        {{ 'blog.description' | translate }}
      </p>
    </div>

    <!-- Search and Filters -->
    <div class="mb-8 space-y-4">
      <!-- Search Bar -->
      <div class="relative">
        <i class="pi pi-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
        <input
          type="text"
          [ngModel]="searchQuery()"
          (ngModelChange)="onSearchChange($event)"
          [placeholder]="'blog.search' | translate"
          class="w-full pl-10 pr-4 py-3 bg-gray-100 dark:bg-(--color-dark-theme) border border-gray-300 dark:border-(--p-menubar-border-color) rounded-lg text-gray-800 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 transition-colors"
        />
      </div>

      <!-- Tag Filters -->
      @if (allTags().length > 0) {
        <div class="flex flex-wrap items-center gap-2">
          <span class="text-sm font-medium text-gray-700 dark:text-gray-300">
            {{ 'blog.filterByTag' | translate }}:
          </span>
          @for (tag of allTags(); track tag) {
            <button
              (click)="selectTag(tag)"
              [class.bg-gray-900]="selectedTag() === tag"
              [class.text-white]="selectedTag() === tag"
              [class.border-gray-700]="selectedTag() === tag"
              [class.dark:bg-gray-100]="selectedTag() === tag"
              [class.dark:text-black]="selectedTag() === tag"
              [class.dark:border-gray-300]="selectedTag() === tag"
              class="px-3 py-1 text-sm font-medium bg-gray-100 dark:bg-(--color-dark-theme) border border-gray-300 dark:border-(--p-menubar-border-color) text-gray-800 dark:text-white rounded-lg hover:bg-gray-900 hover:text-white hover:border-gray-700 dark:hover:bg-gray-100 dark:hover:text-black dark:hover:border-gray-300 transition-colors"
            >
              {{ tag }}
            </button>
          }
          @if (searchQuery() || selectedTag()) {
            <button
              (click)="clearFilters()"
              class="ml-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white underline"
            >
              {{ 'blog.clearFilters' | translate }}
            </button>
          }
        </div>
      }
    </div>

    <!-- Posts Grid with PrimeNG Cards -->
    @if (filteredPosts().length > 0) {
      <div class="grid gap-6 md:grid-cols-2">
        @for (post of postsWithImages(); track post.id; let i = $index) {
          <p-card>
            <ng-template #header>
              <div class="relative h-48 bg-gray-100 dark:bg-(--color-dark-theme) border-b border-gray-300 dark:border-(--p-menubar-border-color) overflow-hidden">
                <img 
                  [ngSrc]="post.headerImage"
                  [fill]="true"
                  [alt]="post.title"
                  class="w-full h-full object-cover"
                  priority="high"
                />
              </div>
            </ng-template>

            <ng-template #title>
              <div class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                {{ post.title }}
              </div>
            </ng-template>

            <ng-template #subtitle>
              <div class="text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-3">
                <time [dateTime]="post.date.toISOString()">
                  {{ formatDate(post.date) }}
                </time>
                @if (post.readingTime) {
                  <span>â€¢</span>
                  <span>{{ post.readingTime }} {{ 'blog.minRead' | translate }}</span>
                }
              </div>
            </ng-template>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
              {{ post.description }}
            </p>

            <!-- Tags -->
            @if (post.tags.length > 0) {
              <div class="flex flex-wrap gap-2 mb-4">
                @for (tag of post.tags; track tag) {
                  <span
                    class="px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-(--color-dark-theme) border border-gray-300 dark:border-(--p-menubar-border-color) text-gray-700 dark:text-gray-300 rounded"
                  >
                    {{ tag }}
                  </span>
                }
              </div>
            }

            <ng-template #footer>
              <a
                [routerLink]="['/blog', post.slug]"
                class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 dark:text-white bg-gray-100 dark:bg-(--color-dark-theme) border border-gray-300 dark:border-(--p-menubar-border-color) hover:bg-gray-900 hover:border-gray-700 hover:text-white dark:hover:bg-gray-100 dark:hover:border-gray-300 dark:hover:text-black rounded-lg transition-colors w-full justify-center"
              >
                <span>{{ 'blog.readMore' | translate }}</span>
                <i class="pi pi-arrow-right text-xs"></i>
              </a>
            </ng-template>
          </p-card>
        }
      </div>
    } @else {
      <!-- No Posts Found -->
      <div class="py-20 text-center">
        <i class="pi pi-inbox text-6xl text-gray-400 mb-4 block"></i>
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-2">
          {{ 'blog.noPostsFound' | translate }}
        </h3>
        <p class="text-gray-600 dark:text-gray-400">
          {{ 'blog.tryDifferentSearch' | translate }}
        </p>
      </div>
    }
  </div>
</div>
